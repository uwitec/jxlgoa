<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.wuxianedu.mapper.ItemMapper">
    
    <resultMap type="com.wuxianedu.domain.Item" id="ItemMap">
    	<id property="iid" column="iid"/>
    	<result property="topic" column="topic"/>
    	<result property="optionA" column="optionA"/>
    	<result property="optionB" column="optionB"/>
    	<result property="optionC" column="optionC"/>
    	<result property="optionD" column="optionD"/>
    	<result property="answer" column="answer"/>
    	<association property="types" javaType="com.wuxianedu.domain.Types">
    		<id property="id" column="types_id"/>
    		<result property="typename" column="typename"/>
    	</association>
    </resultMap>
    
    <select id="findAllItem" resultMap="ItemMap">
    	select * from item
    </select>
    
    <select id="findAItem"  resultMap="ItemMap">
    	select * from item where iid=#{iid}
    </select>
    
    <insert id="insertItem" parameterType="com.wuxianedu.domain.Item">
    	insert into item(topic,optionA,optionB,optionC,optionD,answer,types_id) 
    	values(#{topic},#{optionA},#{optionB},#{optionC},#{optionD},#{answer},#{types.id})
    </insert>
    
    <update id="updateItem" parameterType="com.wuxianedu.domain.Item">
    	update item set topic=#{topic},optionA=#{optionA},optionB=#{optionB},optionC=#{optionC},optionD=#{optionD},
    	answer=#{answer},types_id=#{types.id} where iid=#{iid}
    </update>
    
    <delete id="deleteItem" parameterType="com.wuxianedu.domain.Item">
    	delete from item where iid=#{iid}
    </delete>
    
    <select id="findItemByCondition" parameterType="com.wuxianedu.domain.Item" resultMap="ItemMap">
    	select * from item
    	<where>
    		<if test="types_id !=null and types_id !=''">
    			and types.id = #{types.id}
			</if>
			<if test="topic !=null and topic !=''">
				and name like '%${topic}%'
			</if>
    	</where>
    </select>
    
    <select id="findItemCreatePaper" parameterType="com.wuxianedu.domain.Item" resultMap="ItemMap">
    	select * from item
    	<where>
    		<if test="types_id !=null and types_id !=''">
    			and types.id = #{types.id}
			</if>
			<if test="topic !=null and topic !=''">
				and name like '%${topic}%'
			</if>
    	</where>
    </select>
</mapper>


